<?php require_once 'includes/auth.php'; require_login(); if(!is_admin()){ echo 'Access denied'; exit; } $action=$_REQUEST['action']??''; $usersFile='data/users.json'; $users=read_json($usersFile); if($action==='add' && $_SERVER['REQUEST_METHOD']==='POST'){ $users[]= ['name'=>$_POST['name'],'email'=>$_POST['email'],'phone'=>$_POST['phone'],'carrier'=>$_POST['carrier']]; write_json($usersFile,$users); header('Location: technicians.php'); exit; } if($action==='delete' && isset($_GET['phone'])){ $phone=$_GET['phone']; foreach($users as $i=>$u) if($u['phone']===$phone){ array_splice($users,$i,1); break; } write_json($usersFile,$users); header('Location: technicians.php'); exit; } echo 'Invalid action'; ?>